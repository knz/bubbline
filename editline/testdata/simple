run
reset
resize 80 25
----
TEA WINDOW SIZE: {80 25}
-- view:
[40m[37m> [0m[0m[40m[0m[40m[7m [0m[0m[40m[0m[40m                                                                           [0m‚ê§
[90mM-?[0m [90mtoggle key help[0m[90m ‚Ä¢ [0m[90mC-d[0m [90merase/stop[0m[90m ‚Ä¢ [0m[90mC-c[0m [90mclear/cancel[0m[90m ‚Ä¢ [0m[90mM-.[0m [90mhide/show prompt[0müõá


run observe=(view,value)
type hello world!
----
-- view:
[40m[37m> [0m[0m[40mhello world![0m[40m[7m [0m[0m[40m[0m[40m                                                               [0m‚ê§
[90mM-?[0m [90mtoggle key help[0m[90m ‚Ä¢ [0m[90mC-d[0m [90merase/stop[0m[90m ‚Ä¢ [0m[90mC-c[0m [90mclear/cancel[0m[90m ‚Ä¢ [0m[90mM-.[0m [90mhide/show prompt[0müõá
-- value:
"hello world!"

# By default, the enter key completes the input.
run observe=(view,value)
enter
noop
----
TEA QUIT
-- view:
[37m[37m> [0m[0m[37mhello world![0m[37m[37m [0m[0m[37m[0m[37m                                                               [0m‚ê§
[90mM-?[0m [90mtoggle key help[0m[90m ‚Ä¢ [0m[90mC-d[0m [90merase/stop[0m[90m ‚Ä¢ [0m[90mC-c[0m [90mclear/cancel[0m[90m ‚Ä¢ [0m[90mM-.[0m [90mhide/show prompt[0müõá
-- value:
"hello world!"

# Ctrl+O forces a newline character.
run
reset
type hello
key ctrl+o
type world
----
-- view:
[37m> [0mhello                                                                        ‚ê§
[40m[37m  [0m[0m[40mworld[0m[40m[7m [0m[0m[40m[0m[40m                                                                       [0m‚ê§
[90mM-?[0m [90mtoggle key help[0m[90m ‚Ä¢ [0m[90mC-d[0m [90merase/stop[0m[90m ‚Ä¢ [0m[90mC-c[0m [90mclear/cancel[0m[90m ‚Ä¢ [0m[90mM-.[0m [90mhide/show prompt[0müõá


# If there's empty newlines at the end, they are included in
# the final value.
run observe=(view,value)
reset
type hello world
key ctrl+o
key ctrl+o
----
-- view:
[37m> [0mhello world                                                                  ‚ê§
[37m  [0m                                                                             ‚ê§
[40m[37m  [0m[0m[40m[0m[40m[7m [0m[0m[40m[0m[40m                                                                            [0m‚ê§
[90mM-?[0m [90mtoggle key help[0m[90m ‚Ä¢ [0m[90mC-d[0m [90merase/stop[0m[90m ‚Ä¢ [0m[90mC-c[0m [90mclear/cancel[0m[90m ‚Ä¢ [0m[90mM-.[0m [90mhide/show prompt[0müõá
-- value:
"hello world\n\n"
